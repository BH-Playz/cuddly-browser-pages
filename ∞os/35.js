(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{397:function(e,i,s){"use strict";s.d(i,"a",(function(){return t})),s.d(i,"b",(function(){return n}));class t{constructor(){this._caches={},this._setCaches=e=>(...i)=>{this._caches[e]=i}}}const o=[],n=e=>new Proxy(e,{set:(e,i,s)=>null===s?(e[i]=s,!0):"function"==typeof e[i]?(console.warn("失败：重复注册"),!0):(e[i]=s,o.includes(i)&&delete e._caches[i],e._caches.hasOwnProperty(i)&&(e[i](...e._caches[i]),delete e._caches[i]),!0),get:(e,i)=>"function"==typeof e[i]?e[i]:e._setCaches(i)})},430:function(e,i,s){"use strict";s.r(i),s.d(i,"pluginStore",(function(){return h}));s(7);var t=s(2),o=s(85),n=s(397);class r extends n.a{opened(e){}}const a=Object(n.b)(new r);var p=function(e,i,s,t){var o,n=arguments.length,r=n<3?i:null===t?t=Object.getOwnPropertyDescriptor(i,s):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,s,t);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(i,s,r):o(i,s))||r);return n>3&&r&&Object.defineProperty(i,s,r),r};class c{constructor(){this.pluginsMap={"infinity://weather":"side-weather","infinity://todos":"side-todos","infinity://notes":"side-notes","infinity://history":"side-history","infinity://bookmarks":"side-bookmarks","infinity://extension":"side-extension","infinity://chrome-apps":"chrome-apps","infinity://wallpaper":"wallpaper","infinity://settings":"side-profile",search:"side-search",profile:"side-profile",editIcon:"side-editicon","side-tutorial":"side-tutorial","infinity://chatai":"chatai"},this.pluginsTags={"side-weather":!1,"side-todos":!1,"side-notes":!1,"side-history":!1,"side-bookmarks":!1,"side-extension":!1,"chrome-apps":!1,"side-profile":!1,"side-search":!1,"side-editicon":!1,"side-tutorial":!1,wallpaper:!1,chatai:!1},this.pluginViews=[],this.focusRepair=!1,Object(t.h)(()=>this.pluginViews.map(e=>e),([e])=>{a.opened(e)})}initDom(e){this.pluginsTags[e]=!0}async show(e){if(this.pluginViews.includes(e))return;const i=this.pluginsMap[e];if(!1===this.pluginsTags[i])try{await this.requestPermission(i),Object(t.i)(()=>{this.pluginsTags[i]=!0,this.pluginViews.push(e)})}catch(e){console.log("show:",e)}else this.pluginViews.push(e)}async showRepair(){this.focusRepair=!0,this.show("profile")}async showRepairBadVersion(){this.focusRepair=!0,this.show("profile")}blurRepair(){this.focusRepair=!1}requestPermission(e){switch(e){case"side-bookmarks":return o.a.request(["bookmarks","favicon"]);case"side-extension":case"chrome-apps":return o.a.request(["management"]);case"side-history":return o.a.request(["history","favicon"])}}hideLast(){const e=this.pluginViews.pop();return 0===this.pluginViews.length&&document.getElementsByTagName("newtab-main")[0].shadowRoot.querySelector(".swiper-content").style.setProperty("transform","none"),e}}p([t.g],c.prototype,"pluginsTags",void 0),p([t.b],c.prototype,"initDom",null),p([t.g],c.prototype,"pluginViews",void 0),p([t.g],c.prototype,"focusRepair",void 0),p([t.b],c.prototype,"show",null),p([t.b],c.prototype,"showRepair",null),p([t.b],c.prototype,"showRepairBadVersion",null),p([t.b],c.prototype,"blurRepair",null),p([t.b],c.prototype,"hideLast",null);const h=new c}}]);