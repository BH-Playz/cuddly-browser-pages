(window.webpackJsonp=window.webpackJsonp||[]).push([[28,39],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return y})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return v})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return k})),n.d(t,"m",(function(){return S})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return C})),n.d(t,"e",(function(){return j}));var r,a=n(5),o=n.n(a),i=(n(7),n(0)),s=n(49),c=n(24),u=n.n(c),l=n(165);async function d(e,t,n,r=!1){try{if("idb"===n)await u.a.setItem(e,t);else if("localstorage"===n){let n=t;r||(n=JSON.stringify(t)),i.l&&s.a?await Object(l.d)(e,n):localStorage.setItem(e,n)}else"storage.local"===n&&await new o.a((n,r)=>chrome.storage.local.set({[e]:t},()=>{const e=chrome.runtime.lastError;e&&r(e),n(!0)}));return{data:!0}}catch(e){return console.error("setStorage -> error",e),{error:e}}}async function g(e,t){try{return"idb"===t?await u.a.removeItem(e):"localstorage"===t?i.l&&s.a?await Object(l.c)(e):localStorage.removeItem(e):"storage.local"===t&&await new o.a((t,n)=>chrome.storage.local.remove(e,()=>{const e=chrome.runtime.lastError;e&&n(e),t(null)})),{data:!0}}catch(e){return console.error("clearStorage -> error",e),{error:e}}}!function(e){e.storeNote="store-notes",e.storeSearch="store-search",e.storeSetting="store-setting",e.storeSite="store-site",e.storeSync="store-sync",e.storeTodo="store-todo",e.storeUser="store-user",e.storeWallpaper="store-wallpaper",e.storeWeather="store-weather",e.storeBookmarks="store-bookmarks",e.storeGmail="store-gmail",e.storePrivacy="store-privacy",e.storeWallpaperAutoData="store-wallpaper-auto-data",e.storeNotification="store-notification"}(r||(r={}));class f{constructor(e,t,n){this.options={ensureStringValue:!1,keepWithLogout:!1},this.key=e,this.type=t,this.options=Object.assign(Object.assign({},this.options),n),this.setInstanceMapper()}static getInstanceFromKey(e){return this.instanceKeyMapper.has(e)?this.instanceKeyMapper.get(e):null}static async deleteAllForLogout(){const e=Array.from(this.instanceKeyMapper.values());let t;return(await o.a.all(e.map(async e=>await e.deleteForLogout()))).some(e=>!!e.error&&(t=e.error,!0))?{error:t}:{data:!0}}setInstanceMapper(){f.instanceKeyMapper.set(this.key,this)}async create(e){return await d(this.key,e,this.type)}async read(e){return await async function(e,t,n=!1){try{if("idb"===t){return{data:await u.a.getItem(e)}}if("localstorage"===t){let t;return t=i.l&&s.a?await Object(l.a)(e):localStorage.getItem(e),!n&&t?"undefined"===t?{data:void 0}:{data:JSON.parse(t)}:{data:t}}if("storage.local"===t){return{data:await new o.a((t,n)=>chrome.storage.local.get(e,r=>{const a=chrome.runtime.lastError;a&&n(a),t(null==r?void 0:r[e])}))}}}catch(e){return console.error("getStorage -> error",e),{error:e}}}(this.key,e||this.type)}async update(e){const{data:t,error:n}=await this.read();if(n)return{error:n};if(t&&"object"==typeof t){const n=Object.assign(Object.assign({},t),e);return await this.create(n)}return{error:{data:t}}}async delete(e){return await g(this.key,e||this.type)}async deleteWithRetain(...e){if(0===e.length)return{error:{keys:e}};const{data:t,error:n}=await this.read();if(n)return{error:n};if(t&&"object"==typeof t){const n={};return e.forEach(e=>{n[e]=t[e]}),await this.create(n)}return{error:{data:t}}}async deleteForLogout(){return this.options.keepWithLogout?{data:!0}:await this.delete()}}f.instanceKeyMapper=new Map;const p=new f(r.storeNote,"idb"),m=new class extends f{async create(e){return"localstorage"!==this.type&&setTimeout(()=>{d(this.key,e,"localstorage")},0),super.create(e)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{g(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("ignoreSuggest")}}(r.storeSearch,i.i?"localstorage":"idb"),h=new class extends f{async create(e){return"localstorage"!==this.type&&setTimeout(()=>{d(this.key,e,"localstorage")},0),super.create(e)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{g(this.key,"localstorage")}),super.delete()}async deleteForLogout(){return await super.deleteWithRetain("permission")}}(r.storeSetting,i.i?"localstorage":"idb"),w=new class extends f{async create(e){return"localstorage"!==this.type&&setTimeout(()=>{d(this.key,e,"localstorage")},0),super.create(e)}async delete(){return"localstorage"!==this.type&&requestAnimationFrame(()=>{g(this.key,"localstorage")}),super.delete()}}(r.storeSite,i.i?"localstorage":"idb"),y=new class extends f{constructor(){super(...arguments),this.userStore=null,this.sendTabsSync=e=>{console.warn("SyncStorageManager ~ sync: need inject sendTabsSync",e)}}injectUserStore(e){this.userStore=e}injectSendTabsSync(e){this.sendTabsSync=e}async updateSyncPipe(e,t){var n;if(!(null===(n=this.userStore)||void 0===n?void 0:n.isLogin))return{error:"isLogin false"};const{data:r,error:a}=await this.read();if(a||!r)return{error:"read error"};if(!r.isOpenSync)return{error:"isOpenSync false"};const{autoBackupPipe:o}=r;o.data[e]=t,o.timestamp=Date.now(),o.websocketKeys.includes(e)||o.websocketKeys.push(e);const i=await this.update({autoBackupPipe:o});return this.sendTabsSync(this.key),i}}(r.storeSync,"idb"),b=new f(r.storeTodo,"idb"),v=new f(r.storeUser,i.i?"localstorage":"idb"),E=new f(r.storeWallpaper,"idb"),k=new f(r.storeWeather,"idb"),S=new f(r.storeWallpaperAutoData,"idb"),x=new f(r.storeBookmarks,"localstorage",{keepWithLogout:!0}),O=new f(r.storeGmail,"localstorage",{keepWithLogout:!0}),C=new f(r.storePrivacy,"localstorage",{keepWithLogout:!0}),j=new f(r.storeNotification,"idb")},396:function(e,t,n){var r=n(17),a=n(4),o=n(60),i=n(399),s=n(21),c=n(22).f,u=n(101).f,l=n(400),d=n(215),g=n(216),f=n(26),p=n(9),m=n(11),h=n(48).enforce,w=n(102),y=n(8),b=n(217),v=n(218),E=y("match"),k=a.RegExp,S=k.prototype,x=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,C=/a/g,j=new k(O)!==O,_=g.UNSUPPORTED_Y,A=r&&(!j||_||b||v||p((function(){return C[E]=!1,k(O)!=O||k(C)==C||"/a/i"!=k(O,"i")})));if(o("RegExp",A)){for(var q=function(e,t){var n,r,a,o,c,u,g=this instanceof q,f=l(e),p=void 0===t,w=[],y=e;if(!g&&f&&p&&e.constructor===q)return e;if((f||e instanceof q)&&(e=e.source,p&&(t="flags"in y?y.flags:d.call(y))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),y=e,b&&"dotAll"in O&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),n=t,_&&"sticky"in O&&(a=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),v&&(e=(o=function(e){for(var t,n=e.length,r=0,a="",o=[],i={},s=!1,c=!1,u=0,l="";r<=n;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:x.test(e.slice(r+1))&&(r+=2,c=!0),a+=t,u++;continue;case">"===t&&c:if(""===l||m(i,l))throw new SyntaxError("Invalid capture group name");i[l]=!0,o.push([l,u]),c=!1,l="";continue}c?l+=t:a+=t}return[a,o]}(e))[0],w=o[1]),c=i(k(e,t),g?this:S,q),(r||a||w.length)&&(u=h(c),r&&(u.dotAll=!0,u.raw=q(function(e){for(var t,n=e.length,r=0,a="",o=!1;r<=n;r++)"\\"!==(t=e.charAt(r))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),a+=t):a+="[\\s\\S]":a+=t+e.charAt(++r);return a}(e),n)),a&&(u.sticky=!0),w.length&&(u.groups=w)),e!==y)try{s(c,"source",""===y?"(?:)":y)}catch(e){}return c},L=function(e){e in q||c(q,e,{configurable:!0,get:function(){return k[e]},set:function(t){k[e]=t}})},I=u(k),R=0;I.length>R;)L(I[R++]);S.constructor=q,q.prototype=S,f(a,"RegExp",q)}w("RegExp")},399:function(e,t,n){var r=n(12),a=n(83);e.exports=function(e,t,n){var o,i;return a&&"function"==typeof(o=t.constructor)&&o!==n&&r(i=o.prototype)&&i!==n.prototype&&a(e,i),e}},400:function(e,t,n){var r=n(12),a=n(33),o=n(8)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},50:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));n(20);const r="store-wallpaper-cache",a="infinity-image-base64",o=navigator.userAgent.toLowerCase().match(/version\/([\d.]+).*safari/),i="format/webp/",s="https://infinitypro-img.infinitynewtab.com/findaphoto/bigLink/default.png",c=()=>`${s}?imageView2/2/w/${screen.width}/${o?"":i}interlace/1`},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n(50);const a=/^http[s]?:\/\//;function o(e){return a.test(e)}const i=(e,t)=>{const n="https://infinityicon.infinitynewtab.com/assets/images/"+e;return!0===t?s(n):!1===t?n:/\.(png|jpg|jpeg)$/.test(e)?s(n):n};function s(e){return o(e)?e.includes("?")?e:r.e?e+"?imageView2/0/q/100":e+"?imageView2/0/format/webp/q/100":e}function c(e){return o(e)?e.includes("?")?e:r.e?e+"?imageMogr2/thumbnail/240x/blur/1x0/quality/100|imageslim":e+"?imageMogr2/thumbnail/240x/format/webp/blur/1x0/quality/100|imageslim":e}},812:function(e,t,n){"use strict";n.r(t);n(7);var r=n(5),a=n.n(r);function o(e){return new a.a(t=>{const n=new Image;n.onload=function(){n.onload=null,t(n)},n.src=e})}var i=n(13);var s=n(51);var c=n(0);n(20),n(61),n(396);const u=function(){function e(e){return/cpu (?:iphone )?os (\d+_\d+)/.test(e)?parseFloat(RegExp.$1.replace("_",".")):2}const t={result:"Chrome",details:{Chrome:5,Chromium:0,_360SE:0,_360EE:0},sorted:["Chrome","360SE","360EE","Chromium"],exec:function(e){const t={Chrome:5,Chromium:0,_360SE:0,_360EE:0},n=window.navigator.userAgent;if(/Chrome\/([\d.])+\sSafari\/([\d.])+$/.test(n)){if("Win32"==window.navigator.platform){if(window.clientInformation.languages||(t._360SE+=8),/zh/i.test(navigator.language)&&(t._360SE+=3,t._360EE+=3),window.clientInformation.languages){const e=window.clientInformation.languages.length;e>=3?(t.Chrome+=10,t.Chromium+=6):2==e?(t.Chrome+=3,t.Chromium+=6,t._360EE+=6):1==e&&(t.Chrome+=4,t.Chromium+=4)}for(var r in window.navigator.plugins)"np-mswmp.dll"==window.navigator.plugins[r].filename&&(t._360SE+=20,t._360EE+=20);window.chrome.webstore?Object.keys(window.chrome.webstore).length<=1?t._360SE+=7:2==Object.keys(window.chrome.webstore).length&&(t._360SE+=4,t.Chromium+=3):(t._360SE+=20,t._360EE+=20),window.navigator.plugins.length>=30?(t._360EE+=7,t._360SE+=7,t.Chrome+=7):window.navigator.plugins.length<30&&window.navigator.plugins.length>10?(t._360EE+=3,t._360SE+=3,t.Chrome+=3):window.navigator.plugins.length<=10&&(t.Chromium+=6)}else t._360SE-=50,t._360EE-=50,/Linux/i.test(window.navigator.userAgent)&&(t.Chromium+=5);let e,n=0;for(var r in window.navigator.plugins)if(e=/^(.+) PDF Viewer$/.exec(window.navigator.plugins[r].name)){if("Chrome"==e[1]){t.Chrome+=6,t._360SE+=6,n=1;break}if("Chromium"==e[1]){t.Chromium+=10,t._360EE+=6,n=1;break}}n||(t.Chromium+=9)}const a=new Object;a.Chrome=t.Chrome,a.Chromium=t.Chromium,a["360SE"]=t._360SE,a["360EE"]=t._360EE;const o=[];for(const e in a)o.push([e,a[e]]);return o.sort((e,t)=>t[1]-e[1]),this.sorted=o,this.details=t,this.result=o[0][0],"result"==e?o[0][0]:"details"==e?a:"sorted"==e?o:void 0}};function n(e){if(void 0!==window.scrollMaxX)return"";document.createElement("track");const n=window.navigator.appVersion,r=window.external;if(r&&"SEVersion"in r)return"sougou";if(r&&"LiebaoGetVersion"in r)return"liebao";if(/QQBrowser/.test(n))return"qq";if(/Maxthon/.test(n))return"maxthon";if(/TaoBrowser/.test(n))return"taobao";if(/BIDUBrowser/.test(n))return"baidu";if(/UBrowser/.test(n))return"uc";if(/\sOPR\//.test(n)||/Opera/.test(n)||window.navigator.vendor&&0===window.navigator.vendor.indexOf("Opera"))return"opera";const a=navigator.platform.toLowerCase();return 0==a.indexOf("mac")||0==a.indexOf("linux")||parseInt(e)>86?"chrome":function(){const e=window.navigator.userAgent;try{if(t.exec(),/Chrome\/([\d.])+\sSafari\/([\d.])+$/.test(e))return t.result}catch(e){console.warn(e)}}()||"chrome"}return function(){const t={},r=navigator.userAgent.toLowerCase();let a;if(a=r.match(/rv:([\d.]+)\) like gecko/))t.name="ie",t.ie=a[1];else if(a=r.match(/msie ([\d.]+)/))t.name="ie",t.ie=a[1];else if(a=r.match(/edg\/([\d.]+)/))t.name="edge",t.edge=a[1];else if(a=r.match(/firefox\/([\d.]+)/))t.name="firefox",t.firefox=a[1];else if(a=r.match(/chrome\/([\d.]+)/)){t.name="chrome",t.chrome=a[1];const e=n(t.chrome);e&&(t.chrome+="("+e+")")}else(a=r.match(/opera.([\d.]+)/))?(t.name="opera",t.opera=a[1]):(a=r.match(/version\/([\d.]+).*safari/))?(t.name="safari",t.safari=a[1]):(t.name="unknown",t.unknow=0);const o={};if(r.indexOf("iphone")>-1)o.name="iphone",o.iphone=e(r);else if(r.indexOf("ipod")>-1)o.name="ipod",o.ipod=e(r);else if(r.indexOf("ipad")>-1)o.name="ipad",o.ipad=e(r);else if(r.indexOf("nokia")>-1)o.name="nokia",o.nokia=!0;else if(/android (\d+\.\d+)/.test(r))o.name="android",o.android=parseFloat(RegExp.$1);else if(r.indexOf("win")>-1){if(o.name="win",/win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(r))if("nt"==RegExp.$1)switch(RegExp.$2){case"5.0":o.win="2000";break;case"5.1":o.win="XP";break;case"6.0":o.win="Vista";break;case"6.1":o.win="7";break;case"6.2":o.win="8";break;case"6.3":o.win="8.1";break;case"10.0":o.win="10";break;default:o.win="NT"}else"9x"==RegExp.$1?o.win="ME":o.win=RegExp.$1}else r.indexOf("mac")>-1?o.name="mac":r.indexOf("linux")>-1&&(o.name="linux");const i=o.name+(o[o.name]||"")+"|"+t.name+t[t.name];return{browser:t,system:o,isMobile:o.android||o.iphone||o.ios||o.ipad||o.ipod||o.nokia,string:i}}()}();let l=u.browser.name;if("chrome"===l){const e=u.browser.chrome;e.includes("(qq")?l="qq":e.includes("(sougou)")?l="sogou":c.H?l="360p":e.includes("(360EE")&&(l="360safe")}var d=n(162);const g=[async function(){const{data:e,error:t}=await i.o.read();if(t||!e)return;const{list:n}=e,r=[];if(!(null==n?void 0:n.length))return;n.map(e=>r.push(...e.items));let s=r.map(e=>e.conditionCode);s=[...new Set(s)],await a.a.all(s.map(e=>o(`https://infinityicon.infinitynewtab.com/assets/weather/code_${Number(e)}.png`)))},async function(){try{const{data:e,error:t}=await i.g.read();if(t||!e)return;const n=e.list;await a.a.all(n.map(({logo:e})=>o(Object(s.b)(e))))}catch(e){}},async function(){try{const{data:e,error:t}=await i.d.read();if(t||!e)return;const n=e.list,r=[];n.forEach(({content:e})=>{const t=document.createElement("div");t.innerHTML=e;t.querySelectorAll("img").forEach(e=>{r.push(o(e.getAttribute("src")))})}),await a.a.all(r)}catch(e){}},async function(){const e=["error.png","loading.png","network-error.png","success.png"].map(e=>Object(s.a)(e,!1));try{const t=[];t.push(...e.map(e=>o(e))),await a.a.all(t)}catch(e){}},async function(){var e;const t=Object(s.a)("syncing.png",!1),n=Object(s.a)("sync_failed.png",!1),r=Object(s.a)("add_engine.gif",!1),u=Object(s.a)("setting/animate-default.png"),g=Object(s.a)("setting/animate-default-active.png"),f=Object(s.a)("setting/animate-bounce.png"),p=Object(s.a)("setting/animate-bounce-active.png"),m=Object(s.a)("setting/animate-easin.png"),h=Object(s.a)("setting/animate-easin-active.png"),w=Object(s.a)("setting/edit.svg",!1),y=Object(s.a)("back.svg",!1),b=Object(s.b)("https://infinityicon.infinitynewtab.com/assets/background_image/login-bg.png");let v=[];["360p","360safe"].includes(l)?v=[]:["360safe","qq","sogou","chrome","safari","edge","firefox"].includes(l)&&(v=[1,2]),!c.C.isZh&&["360safe","qq","sogou"].includes(l)&&(v=[]),v.length&&(v=v.map(e=>Object(s.b)(`https://infinityicon.infinitynewtab.com/assets/set_homepage/browser/${l}/${c.C.lang}-${e}.jpg`)));try{const{data:s,error:c}=await i.l.read();if(c)return;const l=(null===(e=null==s?void 0:s.userInfo)||void 0===e?void 0:e.avatar)||d.g;await a.a.all([l,t,n,r,u,f,m,y,g,p,h,w,b,...v].filter(Boolean).map(e=>o(e)))}catch(e){}}];!function e(){requestIdleCallback(async t=>{for(;t.timeRemaining()>0&&g.length>0;)await g.pop()();g.length>0&&e()})}()}}]);